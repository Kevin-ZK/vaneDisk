
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installing and Configuring the Windows Network Drive App &mdash; ownCloud Server Administration Manual 8.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '8.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bootstrap.js"></script>
    <link rel="top" title="ownCloud Server Administration Manual 8.1 documentation" href="../index.html" />
    <link rel="up" title="External Storage (ES only)" href="index.html" />
    <link rel="next" title="User Management (ES only)" href="../enterprise_user_management/index.html" />
    <link rel="prev" title="Configuring SharePoint Integration" href="sharepoint-integration_configuration.html" />
<script type="text/javascript">
(function () {
  /**
   * Patch TOC list.
   *
   * Will mutate the underlying span to have a correct ul for nav.
   *
   * @param $span: Span containing nested UL's to mutate.
   * @param minLevel: Starting level for nested lists. (1: global, 2: local).
   */
  var patchToc = function ($ul, minLevel) {
    var findA;

    // Find all a "internal" tags, traversing recursively.
    findA = function ($elem, level) {
      var level = level || 0,
        $items = $elem.find("> li > a.internal, > ul, > li > ul");

      // Iterate everything in order.
      $items.each(function (index, item) {
        var $item = $(item),
          tag = item.tagName.toLowerCase(),
          pad = 15 + ((level - minLevel) * 10);

        if (tag === 'a' && level >= minLevel) {
          // Add to existing padding.
          $item.css('padding-left', pad + "px");
          console.log(level, $item, 'padding-left', pad + "px");
        } else if (tag === 'ul') {
          // Recurse.
          findA($item, level + 1);
        }
      });
    };

    console.log("HERE");
    findA($ul);
  };

  $(document).ready(function () {
    // Add styling, structure to TOC's.
    $(".dropdown-menu").each(function () {
      $(this).find("ul").each(function (index, item){
        var $item = $(item);
        $item.addClass('unstyled');
      });
      $(this).find("li").each(function () {
        $(this).parent().append(this);
      });
    });

    // Patch in level.
    patchToc($("ul.globaltoc"), 2);
    patchToc($("ul.localtoc"), 2);

    // Enable dropdown.
    $('.dropdown-toggle').dropdown();
  });
}());
</script>

  </head>
  <body>
  

<div class="container">
  <div class="content">
    <div class="page-header">
      <h1><a href="../contents.html">ownCloud Server Administration Manual</a></h1>

    </div>
    
			<div class="row">
				<div class="span3">
					<div class="sidebar">
						<div class="well">
							<div class="menu-support-container">
								<ul id="menu-support" class="menu">
									<ul>
										
<li><a href="../contents.html">Table of Contents</a></li>
									</ul>
                  <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">ownCloud 8.1 Server Administration Manual Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">ownCloud 8.1 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whats_new_admin.html">What&#8217;s New for Admins in ownCloud 8.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration_user/index.html">User Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration_files/index.html">File Sharing and Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration_server/index.html">ownCloud Server Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration_database/index.html">Database Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintenance/index.html">Maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operations/index.html">Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../issues/index.html">Issues and Troubleshooting</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../enterprise_installation/index.html">Enterprise Subscription Installation (ES Only)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enterprise_clients/index.html">Creating Branded ownCloud Clients (ES only)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">External Storage (ES only)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="jive_configuration.html">Jive Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="ldap_home_connector_configuration.html">LDAP Home Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="s3_swift_as_primary_object_store_configuration.html">Configuring S3 and OpenStack Swift Objects as Primary Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="sharepoint-integration_configuration.html">Configuring SharePoint Integration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Installing and Configuring the Windows Network Drive App</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#additional-installation-steps">Additional Installation Steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="#admin-created-smb-mounts">Admin-created SMB Mounts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#personal-smb-mounts">Personal SMB Mounts</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../enterprise_user_management/index.html">User Management (ES only)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enterprise_files_drop/index.html">Enabling Anonymous Uploads with Files Drop (ES Only)</a></li>
</ul>

								</ul>
							</div>
						</div>
					</div>
				</div>
        

				<div class="span9">
					<div class="page-content">
						
  <div class="section" id="installing-and-configuring-the-windows-network-drive-app">
<h1>Installing and Configuring the Windows Network Drive App<a class="headerlink" href="#installing-and-configuring-the-windows-network-drive-app" title="Permalink to this headline">¶</a></h1>
<p>The Windows Network Drive app creates a control panel on your Admin page for
seamless mounting of SMB/CIFS file shares on ownCloud servers that run on Linux.
It does not work on Windows IIS or Windows Apache setups, but only Linux
servers, because it requires the Samba client. (Samba is the free software
implementation of the SMB/CIFS networking protocol.)</p>
<p>Any Windows file share, and Samba servers on Linux and other Unix-type operating
systems use the SMB/CIFS file-sharing protocol. The files and directories on the
SMB/CIFS server will be visible on your Files page just like your other ownCloud
files and folders. They are labeled with a little four-pane Windows-style icon,
and the left pane of your Files page includes a Windows Network Drive filter.</p>
<div class="figure">
<img alt="../_images/smb-files-view.png" src="../_images/smb-files-view.png" />
</div>
<p>Files are synchronized bi-directionally, and you can create, upload, and delete
files and folders. You have the option of allowing users to create personal
mounts of their own SMB/CIFS shares, and controlling whether they can
share them.</p>
<p>ownCloud server admins can create Windows Network Drive mounts, and optionally
allow users to create their own personal Windows Network Drive mounts. The
password for each mount is encrypted and stored in the ownCloud database, using
a long random secret key stored in <tt class="docutils literal"><span class="pre">config.php</span></tt>. This allows ownCloud to
access the shares when the users who own the mounts are not logged in.</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Enable the Windows Network Drive app on your ownCloud Apps page. Then there are
a few dependencies to install.</p>
<p>You must install the ownCloud <tt class="docutils literal"><span class="pre">php5-libsmbclient</span></tt> binary; please refer to the README in
your <a class="reference external" href="https://customer.owncloud.com/">customer.owncloud.com</a> account for instructions
on obtaining it.</p>
<p>You also need the Samba client installed on your Linux system. This is included in
all Linux distributions; on Debian, Ubuntu, and other Debian derivatives this
is <tt class="docutils literal"><span class="pre">smbclient</span></tt>. On SUSE, Red Hat, CentOS, and other Red Hat derivatives it is
<tt class="docutils literal"><span class="pre">samba-client</span></tt>.</p>
</div>
<div class="section" id="additional-installation-steps">
<h2>Additional Installation Steps<a class="headerlink" href="#additional-installation-steps" title="Permalink to this headline">¶</a></h2>
<p>If your Linux distribution ships with <tt class="docutils literal"><span class="pre">libsmbclient</span> <span class="pre">3.x</span></tt>, which is included in the Samba
client, you may need to set up the HOME variable in Apache to prevent a segmentation
fault. If you have <tt class="docutils literal"><span class="pre">libsmbclient</span> <span class="pre">4.1.6</span></tt> and higher it doesn&#8217;t seem to be an issue, so
you won&#8217;t have to change your HOME variable.</p>
<p>To set up the HOME variable on Ubuntu, modify the <tt class="docutils literal"><span class="pre">/etc/apache2/envvars</span></tt>
file:</p>
<div class="highlight-python"><pre>unset HOME
export HOME=/var/www</pre>
</div>
<p>In Red Hat/CentOS, modify the <tt class="docutils literal"><span class="pre">/etc/sysconfig/httpd</span></tt> file and add the
following line to set the HOME variable in Apache:</p>
<div class="highlight-python"><pre>export HOME=/usr/share/httpd</pre>
</div>
<p>By default CentOS has activated SELinux, and the <tt class="docutils literal"><span class="pre">httpd</span></tt> process can not make
outgoing network connections. This will cause problems with the <tt class="docutils literal"><span class="pre">curl</span></tt>, <tt class="docutils literal"><span class="pre">ldap</span></tt>
and <tt class="docutils literal"><span class="pre">samba</span></tt> libraries. You&#8217;ll need to get around this in order to make
this work. First check the status:</p>
<div class="highlight-python"><pre>getsebool -a | grep httpd
httpd_can_network_connect --&gt; off</pre>
</div>
<p>Then enable support for network connections:</p>
<div class="highlight-python"><pre>setsebool -P httpd_can_network_connect 1</pre>
</div>
<p>In openSUSE, modify the <tt class="docutils literal"><span class="pre">/usr/sbin/start_apache2</span></tt> file:</p>
<div class="highlight-python"><pre>export HOME=/var/lib/apache2</pre>
</div>
<p>Restart Apache, open your ownCloud Admin page and start creating SMB/CIFS mounts.</p>
</div>
<div class="section" id="admin-created-smb-mounts">
<h2>Admin-created SMB Mounts<a class="headerlink" href="#admin-created-smb-mounts" title="Permalink to this headline">¶</a></h2>
<p>When you create a new SMB share you need the login credentials for the share,
the server address, the share name, and the folder you want to connect to.</p>
<ol class="arabic simple">
<li>First enter the ownCloud mountpoint for your new SMB share. This must not be
an existing folder.</li>
<li>Then enter which ownCloud users or groups get access to the share</li>
<li>Next, enter the address of the server that contains the SMB share</li>
<li>Then the Windows share name</li>
<li>Then the root folder of the share</li>
</ol>
<p>You have three options for login credentials:</p>
<ul class="simple">
<li>Global credentials, which are set in the <tt class="docutils literal"><span class="pre">Global</span> <span class="pre">credentials</span></tt> fields</li>
<li><tt class="docutils literal"><span class="pre">Credentials</span> <span class="pre">only</span> <span class="pre">for</span> <span class="pre">this</span> <span class="pre">mount</span></tt>, which are set in the fields to the right
of the <tt class="docutils literal"><span class="pre">Credentials</span></tt> dropdown menu</li>
<li><tt class="docutils literal"><span class="pre">Let</span> <span class="pre">users</span> <span class="pre">use</span> <span class="pre">their</span> <span class="pre">credentials</span></tt> requires users to configure their logins
on their Personal pages, or enter them the first time they access the share</li>
</ul>
<div class="figure">
<img alt="../_images/smb-create-share.png" src="../_images/smb-create-share.png" />
</div>
</div>
<div class="section" id="personal-smb-mounts">
<h2>Personal SMB Mounts<a class="headerlink" href="#personal-smb-mounts" title="Permalink to this headline">¶</a></h2>
<p>Users create their own personal SMB mounts on their Personal pages. These are
created the same way as Admin-created shares. Users have only two options for
login credentials:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">Use</span> <span class="pre">personal</span> <span class="pre">credentials</span></tt>, which are entered in the <tt class="docutils literal"><span class="pre">Personal</span>
<span class="pre">credentials</span></tt> fields.</li>
<li><tt class="docutils literal"><span class="pre">Use</span> <span class="pre">credentials</span> <span class="pre">only</span> <span class="pre">for</span> <span class="pre">this</span> <span class="pre">mount</span></tt>, which are entered in the fields to
the right of the Credentials dropdown menu</li>
</ul>
<div class="figure">
<img alt="../_images/smb-user-share.png" src="../_images/smb-user-share.png" />
</div>
</div>
</div>


					</div>
				</div>
			</div>
    
  </div>
</div>
  </body>
</html>